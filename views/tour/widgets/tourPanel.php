<?php

use humhub\libs\Html;
use yii\helpers\Url;

?>
<div class="panel panel-default panel-tour" id="getting-started-panel">
    <?php
    // Temporary workaround till panel widget rewrite in 0.10 verion
    $removeOptionHtml = "<li>" . \humhub\widgets\ModalConfirm::widget([
                'uniqueID' => 'hide-panel-button',
                'title' => Yii::t('TourModule.base', '<strong>Remove</strong> tour panel'),
                'message' => Yii::t('TourModule.base', 'This action will remove the tour panel from your dashboard. You can reactivate it at<br>Account settings <i class="fa fa-caret-right"></i> Settings.'),
                'buttonTrue' => Yii::t('TourModule.base', 'Ok'),
                'buttonFalse' => Yii::t('TourModule.base', 'Cancel'),
                'linkContent' => '<i class="fa fa-eye-slash"></i> ' . Yii::t('TourModule.base', ' Remove panel'),
                'linkHref' => Url::to(["/tour/tour/hide-panel", "ajax" => 1]),
                'confirmJS' => '$(".panel-tour").slideToggle("slow")'
                    ], true) . "</li>";
    ?>

    <!-- Display panel menu widget -->
    <?php echo \humhub\widgets\PanelMenu::widget(['id' => 'getting-started-panel', 'extraMenus' => $removeOptionHtml]); ?>

    <div class="panel-heading">
        <?php echo Yii::t('TourModule.base', '<strong>Getting</strong> Started'); ?>
    </div>
    <div class="panel-body">
        <p>
            <?php echo Yii::t('TourModule.base', 'Get to know your way around the site\'s most important features with the following guides:'); ?>
        </p>

        <ul class="tour-list">
            <li id="interface_entry" class="<?php if ($interface == 1) : ?>completed<?php endif; ?>">
                <a href="<?php echo Url::to(['/dashboard/dashboard', 'tour' => true]); ?>" data-pjax-prevent>
                    <div class="item"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="18" viewBox="0 0 25 18" fill="none"><path d="M22.8476 1.81934L23.7067 0.964844H22.495H2.50498H1.29334L2.15236 1.81933L10.5914 10.2139C10.5915 10.214 10.5916 10.2141 10.5918 10.2143C11.1017 10.7239 11.7804 11.0052 12.5 11.0052C13.2193 11.0052 13.8981 10.7242 14.4068 10.2156C14.407 10.2155 14.4071 10.2154 14.4073 10.2152L22.8476 1.81934ZM0.964844 15.0827V16.2844L1.81727 15.4374L8.14725 9.14765L8.504 8.79316L8.14744 8.43848L1.81746 2.14185L0.964844 1.29373V2.49634V15.0827ZM2.15348 15.7586L1.29334 16.6133H2.50591H22.4941H23.7067L22.8465 15.7586L16.519 9.47135L16.1664 9.12097L15.814 9.47154L14.7355 10.5443L14.7346 10.5453C14.1381 11.1417 13.3457 11.4701 12.5 11.4701C11.6544 11.4701 10.862 11.1418 10.2641 10.5439L10.2631 10.543L9.18602 9.47154L8.83359 9.12097L8.48098 9.47135L2.15348 15.7586ZM23.1827 15.4374L24.0352 16.2844V15.0827V2.49634V1.29373L23.1825 2.14185L16.8526 8.43848L16.496 8.79316L16.8528 9.14765L23.1827 15.4374ZM2.19727 0.5H22.8027C23.7427 0.5 24.5 1.26584 24.5 2.19727V15.3809C24.5 16.3217 23.7327 17.0781 22.8027 17.0781H2.19727C1.26539 17.0781 0.5 16.3186 0.5 15.3809V2.19727C0.5 1.26459 1.2603 0.5 2.19727 0.5Z" fill="#045269" stroke="#045269"/></svg></div> <?= Yii::t('TourModule.base', '<strong>Guide:</strong> Overview'); ?></div>
                </a>
            </li>
            <li class="<?php if ($spaces == 1) : ?>completed<?php endif; ?>">
                <a id="interface-tour-link" href="<?php echo Url::to(['/tour/tour/start-space-tour']); ?>" data-pjax-prevent>
                    <div class="item"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none"><path d="M18.2118 5.80642L16.8748 6.71934H18.4938H23.4375C24.0223 6.71934 24.5 7.19704 24.5 7.78184V11.6881C24.5 11.8432 24.3739 11.9693 24.2188 11.9693H23.4375H22.9375V12.4693V21.8443C22.9375 22.4291 22.4598 22.9068 21.875 22.9068H3.125C2.5402 22.9068 2.0625 22.4291 2.0625 21.8443V12.4693V11.9693H1.5625H0.78125C0.626143 11.9693 0.5 11.8432 0.5 11.6881V7.78184C0.5 7.19704 0.977705 6.71934 1.5625 6.71934H6.50625H8.12519L6.7882 5.80642C6.44671 5.57324 6.17054 5.35286 5.98765 5.16863C4.92341 4.09644 4.92343 2.34869 5.98902 1.27648L5.98905 1.27645C7.01713 0.24181 8.83318 0.240557 9.86251 1.27645L9.86282 1.27676C10.1511 1.56641 10.7411 2.37823 11.2294 3.35666C11.7241 4.34809 12.0506 5.38619 11.9482 6.15314L11.8725 6.71934H12.4438H12.5563H13.1279L13.0518 6.15273C12.9487 5.38605 13.2751 4.34818 13.77 3.35673C14.2584 2.37837 14.8488 1.56648 15.1372 1.27676L15.1375 1.27645C16.1668 0.240557 17.9829 0.241809 19.0109 1.27645L19.011 1.27648C20.0765 2.34866 20.0765 4.09626 19.011 5.16844L19.0095 5.16994C18.8289 5.35315 18.5536 5.57305 18.2118 5.80642ZM6.38777 1.6729L6.38737 1.6733C5.5391 2.52764 5.5391 3.91728 6.38737 4.77163L6.38741 4.77166C6.78055 5.16753 7.52046 5.64645 8.27422 6.02132C9.01712 6.39079 9.89196 6.71934 10.5562 6.71934C10.7057 6.71934 10.8261 6.70217 10.9242 6.67367C10.9734 6.65935 11.0171 6.64214 11.0556 6.62282C11.0749 6.61317 11.0927 6.60306 11.1092 6.59265C11.1174 6.58745 11.1253 6.58218 11.1328 6.57688L11.1438 6.56892L11.1491 6.56492L11.1517 6.56293L11.153 6.56193L11.1536 6.56143C11.1539 6.56118 11.1542 6.56093 10.8453 6.16777L11.1542 6.56093L11.1811 6.53985L11.2048 6.51531C11.3843 6.32962 11.4129 6.08494 11.4181 5.94367C11.4242 5.77787 11.4019 5.5952 11.3664 5.41442C11.2948 5.04928 11.1532 4.6104 10.972 4.16451C10.6143 3.28408 10.059 2.27163 9.46397 1.67308L9.4638 1.6729C9.05342 1.26051 8.50583 1.03184 7.92656 1.03184C7.34598 1.03184 6.79832 1.26033 6.38777 1.6729ZM11.7188 22.3443H12.2188V21.8443V12.4693V11.9693H11.7188H3.125H2.625V12.4693V21.8443V22.3443H3.125H11.7188ZM11.7188 11.4068H12.2188V10.9068V7.78184V7.28184H11.7188H10.5562H1.5625H1.0625V7.78184V10.9068V11.4068H1.5625H11.7188ZM15.5366 1.67247L15.536 1.67308C14.941 2.27163 14.3858 3.28407 14.0278 4.16442C13.8466 4.61028 13.7049 5.04908 13.633 5.4141C13.5974 5.59482 13.5749 5.77736 13.5808 5.943C13.5859 6.08395 13.6139 6.32861 13.7929 6.51454L13.7928 6.5146L13.7995 6.52127C13.8211 6.5429 13.8409 6.55831 13.8424 6.55951L13.8425 6.55958C13.8492 6.5649 13.8551 6.56936 13.8599 6.57286C13.8698 6.58 13.8793 6.5864 13.8882 6.59211C13.9063 6.60365 13.9253 6.61432 13.9451 6.62415C13.9847 6.64387 14.029 6.66096 14.0782 6.67498C14.176 6.70287 14.2957 6.71934 14.4438 6.71934C15.108 6.71934 15.9829 6.39079 16.7258 6.02132C17.4795 5.64645 18.2195 5.16753 18.6126 4.77166L18.6126 4.77163C19.4609 3.91728 19.4609 2.52764 18.6126 1.67329L18.6118 1.67247C17.7839 0.842551 16.3667 0.840387 15.5366 1.67247ZM21.875 22.3443H22.375V21.8443V12.4693V11.9693H21.875H13.2812H12.7812V12.4693V21.8443V22.3443H13.2812H21.875ZM23.4375 11.4068H23.9375V10.9068V7.78184V7.28184H23.4375H14.4438H13.2812H12.7812V7.78184V10.9068V11.4068H13.2812H23.4375Z" fill="#045269" stroke="#045269"/></svg></div> <?php echo Yii::t('TourModule.base', '<strong>Guide:</strong> Spaces'); ?></div>
                </a>
            </li>
            <li class="<?php if ($profile == 1) : ?>completed<?php endif; ?>">
                <a href="<?php echo Yii::$app->user->getIdentity()->createUrl('//user/profile/home', ['tour' => 'true']); ?>" data-pjax-prevent>
                    <div class="item"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="27" height="29" viewBox="0 0 27 29" fill="none"><path d="M23.1594 28.2727H9.52304C7.95713 28.2727 6.68213 26.9988 6.68213 25.4318V8.38632C6.68213 6.81928 7.95713 5.54541 9.52304 5.54541H23.1594C24.7253 5.54541 26.0003 6.81928 26.0003 8.38632V25.4318C26.0003 26.9988 24.7253 28.2727 23.1594 28.2727ZM9.52304 6.68177C8.58327 6.68177 7.81849 7.44655 7.81849 8.38632V25.4318C7.81849 26.3716 8.58327 27.1363 9.52304 27.1363H23.1594C24.0992 27.1363 24.864 26.3716 24.864 25.4318V8.38632C24.864 7.44655 24.0992 6.68177 23.1594 6.68177H9.52304Z" fill="#045269" stroke="#045269" stroke-width="0.5"/><path d="M4.97728 24.8637H3.84091C2.275 24.8637 1 23.5898 1 22.0227V3.84091C1 2.27386 2.275 1 3.84091 1H17.4773C19.0432 1 20.3182 2.27386 20.3182 3.84091C20.3182 4.15455 20.0637 4.40909 19.75 4.40909C19.4364 4.40909 19.1818 4.15455 19.1818 3.84091C19.1818 2.90114 18.4171 2.13636 17.4773 2.13636H3.84091C2.90114 2.13636 2.13636 2.90114 2.13636 3.84091V22.0227C2.13636 22.9625 2.90114 23.7273 3.84091 23.7273H4.97728C5.29091 23.7273 5.54546 23.9818 5.54546 24.2955C5.54546 24.6091 5.29091 24.8637 4.97728 24.8637Z" fill="#045269" stroke="#045269" stroke-width="0.5"/><path d="M20.8871 20.3185H11.7962C11.4826 20.3185 11.228 20.0639 11.228 19.7503C11.228 19.4367 11.4826 19.1821 11.7962 19.1821H20.8871C21.2008 19.1821 21.4553 19.4367 21.4553 19.7503C21.4553 20.0639 21.2008 20.3185 20.8871 20.3185Z" fill="#045269" stroke="#045269" stroke-width="0.5"/><path d="M20.8871 24.8634H11.7962C11.4826 24.8634 11.228 24.6089 11.228 24.2952C11.228 23.9816 11.4826 23.7271 11.7962 23.7271H20.8871C21.2008 23.7271 21.4553 23.9816 21.4553 24.2952C21.4553 24.6089 21.2008 24.8634 20.8871 24.8634Z" fill="#045269" stroke="#045269" stroke-width="0.5"/><path d="M20.8871 15.7726H11.7962C11.4826 15.7726 11.228 15.518 11.228 15.2044C11.228 14.8908 11.4826 14.6362 11.7962 14.6362H20.8871C21.2008 14.6362 21.4553 14.8908 21.4553 15.2044C21.4553 15.518 21.2008 15.7726 20.8871 15.7726Z" fill="#045269" stroke="#045269" stroke-width="0.5"/><path d="M20.8871 11.2277H11.7962C11.4826 11.2277 11.228 10.9731 11.228 10.6595C11.228 10.3459 11.4826 10.0913 11.7962 10.0913H20.8871C21.2008 10.0913 21.4553 10.3459 21.4553 10.6595C21.4553 10.9731 21.2008 11.2277 20.8871 11.2277Z" fill="#045269" stroke="#045269" stroke-width="0.5"/></svg></div> <?php echo Yii::t('TourModule.base', '<strong>Guide:</strong> User profile'); ?></div>
                </a>
            </li>
        </ul>
    </div>
</div>

<?php if ($showWelcome) : ?>
    <script <?= Html::nonce() ?>>

        $(document).on('humhub:ready', function () {
            humhub.modules.ui.modal.global.load( "<?= Url::to(['/tour/tour/welcome']) ?>");
        });

    </script>
<?php endif; ?>
